// add allJavadoc task generating all subproject Javadoc
apply plugin: 'java'

task allJavadoc(type: Javadoc) {
  options.encoding = defaultEncoding
  destinationDir = file("${buildDir}/docs/javadoc")
  failOnError = false

  subprojects {
    afterEvaluate { Project subproject ->
      source += [subproject.sourceSets.main.allJava]
      classpath += [subproject.sourceSets.main.compileClasspath]
    }
  }
}

// allJavadoc execute on build task
build.dependsOn allJavadoc